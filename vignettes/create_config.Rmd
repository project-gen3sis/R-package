---
title: "Creating Configurations in gen3sis"
output: rmarkdown::html_vignette
date: "`r format(Sys.time(),  '%d.%m.%Y')`"
vignette: >
  %\VignetteIndexEntry{Creating Configuration}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

The configuration object includes the customizable initialization, observer, speciation, dispersal, evolution and ecology functions. Altogether, these six functions are applied as defined in the simulation engine. The possibility to customize these functions confers the high flexibility of *gen3sis* in terms of including a wide range of theoretical knowledge. Additionally, the configuration object lists the model settings, i.e. the ecological traits considered in the simulation: whether a random seed is used; allowing simulation reproducibility; start and end times of the simulation; and rules about aborting the simulation, including the maximum global or local species number permitted. 

This vignette will guide you trough the config input object. It can be either an R object or a file, that can be easily shared and modified.

Here we will:

1. Create a config form scratch
2. Modify an existing config
3. Config elements

```{r setup}
library(gen3sis)
```

## 1. Create a config from scratch


In order to create an empty config, we use the function *write_config_skeleton* and define the output location. For that we have to define where the empty config will be stored.

```{r eval=TRUE}
# get data path
datapath <- system.file(file.path("extdata", "EmptyConfig"), package="gen3sis")
# set config_empty.R file path
config_file_path <- file.path(datapath, "EmptyConfig", "config_empty.R")
```

And then create an empty config.

```{r eval=FALSE, message=FALSE}
#writes out a config skeleton
write_config_skeleton(config_file_path)
```
This is how the config_empty.R looks like.You can identify the main areas and each part is described briefly.

```{r comment=''}
cat(readLines(config_file_path), sep = '\n')
```



The configuration object (Figure 1 B), also required by the function contains the biological parameters that describe the rules of evolution, as well as technical parameters, such as seedding. The function “write_config_skeleton (“my_config.R”) creates a skeleton config file, which can then be changed by the user. 

The initialization function creates the ancestor species at the start of the simulation. Users can define the number of ancestor species, their distribution within the ancient landscape and their trait values. With the observer function, changes over time in any abiotic or biotic information of the virtual world can be recorded by defining the outputs that are saved at specified time steps, and results can be saved and plotted in real-time as the model runs. 